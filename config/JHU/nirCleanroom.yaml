geometry:

  # Affine/Projective transforms have awful residual structures, > 30 pix
  # So switch to more opaque polynomial pairs.
  #
  transformClass: skimage.transform.PolynomialTransform
  transformCoeffs:
    - [[-2.45111721e+02,  7.66237730e-02,  1.05022159e-02, -3.23987679e-08, -3.36144321e-07,
        -1.41244392e-07,  4.04448098e-13, -5.12012804e-14,  4.63060678e-12, -3.80592871e-13],
       [-4.96415210e+02,  1.40822618e-03,  1.99192778e-01, -1.84085911e-08, -8.90029077e-08,
        -7.50668145e-07, -1.82970397e-14,  1.42628048e-12,  4.40904674e-14,  1.11339594e-11]]
    - [[ 2.91772281e+03 , 1.31977585e+01, -6.35025408e-01,  8.01117974e-05,  2.99078297e-04,
         4.16958638e-05, -1.46991824e-08,  3.22386402e-10, -2.00583304e-08,  1.02107005e-09],
       [ 2.50300506e+03, -8.08794792e-02,  5.10754470e+00,  1.46921051e-05,  3.19359679e-05,
         9.95015625e-05,  3.19667029e-10, -7.85337456e-09,  1.37973435e-10, -8.60548022e-09]]
# Aim for 7k ADU in 3-reads
leds:
  wave: [1300, 1200, 1085, 1070, 1050, 970, 930]
  dutyCycle: [15.0, 5.0, 30, 33, 15, 15, 13]
  focusOffset: [4.0, 0, 0, 0, 0, 0, -10.0]
  position: [112, 432, 1396, 1639, 1822, 3250, 3996]

#
mono:
  use: [True, True, True, True, False, True]
  wave: [1260, 1180, 1100, 1020, 950, 940]
  dutyCycle: [100, 100, 100, 100, 100, 100]
  positionMM: [-29.450, -14.135, 0.721, 15.290, 27.900, 29.700]

# Per detector tweaks to positions, with a dictionary of (wave, rows) -> (xoff, yoff)
# But we have to save the keys as strings. Python encodes tuples with spaces
# after the commas: make sure we match that here. Both wave and row should be ints.
#
nudges:
  n3:
    (1260, 3900): [3, 6]
    (1260, 3283): [3, -8]
    (1260, 2666): [5, -8]
    (1260, 1433): [-5, -5]
    (1260, 816): [-13, 3]
    (1260, 200): [-1, -2]
    (1180, 2666): [0, 5]
    (1180, 2050): [3, 0]
    (1180, 816): [0, 4]
    (1100, 3900): [-3, -3]
    (1100, 3283): [0, 3]
    (1100, 1433): [2, -3]
    (1100, 816): [-3, 0]
    (1020, 3283): [4, 3]
    (1020, 1433): [-6, 6]
    (1020, 200): [0, -10]
    (940, 3900): [-2, 2]
    (940, 3283): [-10, 2]
    (940, 2050): [3, 0]
    (940, 1125): [2, -2]
    (940, 816): [-8, -3]
    (940, 200): [4, -10]
