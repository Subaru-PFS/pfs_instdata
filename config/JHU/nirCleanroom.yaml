geometry:

  # Affine/Projective transforms have awful residual structures, > 30 pix
  # So switch to more opaque polynomial pairs.
  #
  transformClass: skimage.transform.PolynomialTransform
  transformCoeffs:
    - [[-2.465069e+02,  7.669282e-02,  1.068281e-02, -3.287434e-08, -3.434331e-07,
        -1.465556e-07,  4.030478e-13, -2.011210e-14,  4.793902e-12, -3.737639e-13],
       [-4.922804e+02,  1.356362e-03,  1.983551e-01, -1.909624e-08, -7.874559e-08,
        -7.031118e-07, -8.844442e-15,  1.401545e-12, -2.287555e-13,  1.029888e-11]]
    - [[ 2.929085e+03,  1.319221e+01, -6.462303e-01,  7.902706e-05,  3.052378e-04,
         4.401590e-05, -1.435061e-08, -1.855725e-11, -2.096763e-08,  9.675917e-10],
       [ 2.490450e+03, -7.722918e-02,  5.124178e+00,  1.497835e-05,  2.863061e-05,
         9.335553e-05,  2.122242e-10, -7.740236e-09,  6.928935e-10, -7.921763e-09]]
# Aim for 7k ADU in 3-reads
leds:
  wave: [1300, 1200, 1085, 1070, 1050, 970, 930]
  dutyCycle: [15.0, 5.0, 30, 33, 15, 15, 13]
  focusOffset: [4.0, 0, 0, 0, 0, 0, -10.0]
  position: [112, 432, 1396, 1639, 1822, 3250, 3996]

#
mono:
  use: [True, True, True, True, False, True]
  wave: [1260, 1180, 1100, 1020, 950, 940]
  dutyCycle: [100, 100, 100, 100, 100, 100]
  positionMM: [-29.450, -14.135, 0.721, 15.290, 27.900, 29.700]

# Per detector tweaks to positions, with a dictionary of (wave, rows) -> (xoff, yoff)
# But we have to save the keys as strings. Python encodes tuples with spaces
# after the commas: make sure we match that here. Both wave and row should be ints.
#
nudges:
  n3:
    (1260, 3900): [3, 6]
    (1260, 3283): [3, -8]
    (1260, 2666): [5, -8]
    (1260, 1433): [-5, -5]
    (1260, 816): [-13, 3]
    (1260, 200): [-1, -2]
    (1180, 2666): [0, 5]
    (1180, 2050): [3, 0]
    (1180, 816): [0, 4]
    (1100, 3900): [-3, -3]
    (1100, 3283): [0, 3]
    (1100, 1433): [2, -3]
    (1100, 816): [-3, 0]
    (1020, 3283): [4, 3]
    (1020, 1433): [-6, 6]
    (1020, 200): [0, -10]
    (940, 3900): [-2, 2]
    (940, 3283): [-10, 2]
    (940, 2050): [3, 0]
    (940, 1125): [2, -2]
    (940, 816): [-8, -3]
    (940, 200): [4, -10]
